<!doctype html>
<title>Visualization Test</title>
<script src="../../js/lib/jquery.min.js"></script>
<script src="d3.v2.min.js"></script>
<script>
var socr = {};
</script>
<script src="vis.js"></script>
<link rel="stylesheet" href="vis.css"></link>
<style>
*{
	font-family:Arial,Verdana
};
body{
	margin:20px auto;
	text-align:center;
}
h3{
	text-align:center;
}
</style>
<body>
 <h3>Visualization Demo</h3>
 <hr>
<div class = "chart">
</div>
<p> Choose Method : 
<select id="method">
	<option>sturges</option>
	<option>thumbRule</option>
	<option>discrete</option>
	<option>decimal</option>
</select>
<input type="submit" id="submit">
</p>
<textarea id="data-input" rows="5" cols="100">0.02,0.03,0.04,0.1</textarea><p>
</p>
<script>

function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(location.search);
    return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

var qmethod, qdata = '';

if(getParameterByName('method') !== ''){
	qmethod = getParameterByName('method')
}
if(getParameterByName('data') !== ''){
	qdata = getParameterByName('data');
	$('#data-input').text(qdata);
	qdata = qdata.split(',').map(function(x){
	return parseFloat(x,10);
});
}

var textarea = $('#data-input').val().split(',').map(function(x){
	return parseFloat(x,10);
});

// console.log(getMaxOfArray(data))
 var el = socr.vis.generate({
	parent : '.chart',
	data : (qdata == '') ? textarea : qdata,
	height: 390,
	binSize : 80,
	labelPrecision : 1,
	tickNo : 10,
 	method : (qmethod == '') ? 'sturges' : qmethod
}) ;

$('#submit').on('click', function(){
	var textarea = $('#data-input').val().split(',').map(function(x){
	return parseFloat(x,10);
});

$('.chart').html('');
	socr.vis.generate({
	parent : '.chart',
	data : textarea,
	height: 390,
	binSize : 80,
	labelPrecision : 1,
	tickNo : 10,
 	method : $('#method').val()
	}) ;
})
</script>
</body>